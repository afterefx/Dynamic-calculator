$(function(){var k=1;var l='<td><div style="display: none;">';var c="</div></td>";var e=/^[0-9]+(.[0-9]+)?$/;var d=/^[\w\s]*$/;function f(){var n="";var p=$("table#cat").data();var o;n+="<option>--</option>";for(o in p){if(1){n+="<option>"+o+"</option>"}}return n}function j(n){$(".notification").text(n);if($(".notificationArea").css("display")=="none"){$(".notificationArea").slideDown()}}function i(){if($(".notificationArea").css("display")=="block"){$(".notificationArea").slideUp()}}$("span.assignNum").click(function(){var n=$(this).html();$(this).replaceWith('<input type="text" class="assignNum" value="'+n+'" />');$("input.assignNum").focus().select();g()});function g(){$("span.assignNum").click(function(){var n=$(this).html();$(this).replaceWith('<input type="text" class="assignNum" value="'+n+'" />');$("input.assignNum").focus().select();g()});$("input.assignNum").blur(function(){var n=$(this).val();if($.trim(n)===""){n="Assignment"}if(!d.test(n)){j("Only letters and numbers may be used.");$(this).focus().select()}else{i();$(this).replaceWith('<span class="assignNum">'+n+"</span>");g()}});$("input.gradeCol").blur(function(){var n=$.trim($(this).val());if(!e.test(n)){j("Please enter a number between 0 and 100");$(this).focus().select();return}n=parseFloat(n);if(n<0||n>100){j("Please enter a number between 0 and 100");$(this).focus().select()}else{i();$(this).val(n)}})}function m(q){var o=1;var p;var n=f();for(o=1;o<=k;o++){p=$("#select"+o).val();$("#select"+o).html(n);if(p==q){$("#select"+o).val("--")}else{$("#select"+o).val(p)}}}function h(o){var r=$("table#cat").data();var q=0;var n=0;var p;for(p in r){if(p!="--"){n=$("table#cat").data(p);q+=parseFloat(n)}}q+=parseFloat(o);if(q>100){return false}else{return true}}function a(){var q=$("table#cat").data();var p=0;var n=0;var o;for(o in q){if(o!="--"){n=$("table#cat").data(o);p+=parseFloat(n)}}if(p==100){return true}else{return false}}function b(){var n=$("input#newCatName").val();if(!d.test(n)){j("Only letters and numbers may be used.");$("input#newCatName").focus().select();return false}n=$.trim($("input#newPercent").val());n=parseFloat(n);if(!e.test(n)||n<0||n>100){j("Please enter a number between 0 and 100");$("input#newPercent").focus().select();return false}else{$("input#newPercent").val(n)}return true}$("button#assign").click(function(){k++;var q=' <input type="text" class="gradeCol" size="3" id="grade'+k+'" />';var p=l+'<span class="assignNum">Assignment '+k+"</span>: "+c;var o=l+q+c;var n=l+'<select id="select'+k+'">'+f()+"</select>"+c;$("table#assign").append("<tr>"+p+o+n+"</tr>");$("table#assign tr:last div").slideDown("fast",function(){$(this).replaceWith($(this).contents())});g()});$("input#newCatName").blur(function(){var n=$(this).val();if(!d.test(n)){j("Only letters and numbers may be used.");$(this).focus().select()}});$("input#newPercent").blur(function(){var n=$.trim($(this).val());n=parseFloat(n);if(!e.test(n)||n<0||n>100){j("Please enter a number between 0 and 100");$(this).focus().select()}else{$(this).val(n)}});$("button#addCat").click(function(){if(b()){var r=$("input#newCatName").val();var q=$("input#newPercent").val();if(h(q)){var p=l+r+c;var o=l+q+"%"+c;var n=l+'<button class="remove'+r+'" id="'+r+'">Remove '+r+"</button>"+c;if($.trim(r)===""){j("Please insert a category name.");$("input#newCatName").focus()}else{if($.trim(q)===""){j("Please insert a percentage.");$("input#newPercent").focus()}else{i();$("table#cat").append("<tr>"+p+o+n+"</tr>");$("table#cat").data(r,q);$("table#cat tr:last div").slideDown("fast",function(){$(this).replaceWith($(this).contents())});$("select").append("<option>"+$("input#newCatName").val()+"</option>");$(".remove"+r).click(function(){var u=$(this).data("categoryName");$("table#cat").removeData(u);var v=$(this).parentsUntil("tbody");var t=$(this).parentsUntil("tr");var s=v.parent().html();v.find("td").each(function(w){s=$(this).html();$(this).replaceWith('<td><div class="removeMeNow" style="display:block">'+s+"</div></td>")});$(".removeMeNow").animate({height:0},500,function(){v.remove()});m(u)});$("input#newCatName").val("");$("input#newPercent").val("");$(".remove"+r).data("categoryName",r)}}}else{j("You cannot have over 100% for the sum of your categories")}}});$("button#calculate").click(function(){if(a()){var n=0;var o=$("table#cat").data();var t;var r=1;var s;var q;var w;var p=0;var u;var v;for(t in o){q=0;s=0;p=0;v=0;if(1){for(r=1;r<=k;r++){w=0;u=$("#select"+r).val();if(u==t){w=parseFloat($("#grade"+r).val());s+=w;q++}}if(q==0){j("You must have least one grade for each category");return}else{p=s/q}v=p*($("table#cat").data(t)/100);n+=v}}n=n.toFixed(2);$("span#grade").text(n)}else{j("Your categories percentages must add up to 100%.")}});g()});
