$(function(){var l=1;var m='<td><div style="display: none;">';var c="</div></td>";var e=/^[0-9]+(.[0-9]+)?$/;var d=/^[\w\s]*$/;function f(){var o="";var q=$("table#cat").data();var p;o+="<option>--</option>";for(p in q){if(1){o+="<option>"+p+"</option>";}}return o;}function k(o){$(".notification").text(o);if($(".notificationArea").css("display")=="none"){$(".notificationArea").slideDown();}}function i(){if($(".notificationArea").css("display")=="block"){$(".notificationArea").slideUp();}}$("span.assignNum").click(function(){var o=$(this).html();$(this).replaceWith('<input type="text" class="assignNum" value="'+o+'" />');$("input.assignNum").focus().select();g();});function g(){$("span.assignNum").click(function(){var o=$(this).html();$(this).replaceWith('<input type="text" class="assignNum" value="'+o+'" />');$("input.assignNum").focus().select();g();});$("input.assignNum").blur(function(){var o=$(this).val();if($.trim(o)===""){o="Assignment";}if(!d.test(o)){k("Only letters and numbers may be used.");$(this).focus().select();}else{i();$(this).replaceWith('<span class="assignNum">'+o+"</span>");g();}});$("input.gradeCol").blur(function(){var o=$.trim($(this).val());if(!e.test(o)){k("Please enter a number between 0 and 100");$(this).focus().select();return;}o=parseFloat(o);if(o<0||o>100){k("Please enter a number between 0 and 100");$(this).focus().select();}else{i();$(this).val(o);}});}function n(r){var p=1;var q;var o=f();for(p=1;p<=l;p++){q=$("#select"+p).val();$("#select"+p).html(o);if(q==r){$("#select"+p).val("--");}else{$("#select"+p).val(q);}}}function h(p){var s=$("table#cat").data();var r=0;var o=0;var q;for(q in s){if(q!="--"){o=$("table#cat").data(q);r+=parseFloat(o);}}r+=parseFloat(p);if(r>100){return false;}else{return true;}}function a(){var r=$("table#cat").data();var q=0;var o=0;var p;for(p in r){if(p!="--"){o=$("table#cat").data(p);q+=parseFloat(o);}}if(q==100){return true;}else{return false;}}function b(){var o=$("input#newCatName").val();if(!d.test(o)){k("Only letters and numbers may be used.");$("input#newCatName").focus().select();return false;}o=$.trim($("input#newPercent").val());o=parseFloat(o);if(!e.test(o)||o<0||o>100){k("Please enter a number between 0 and 100");$("input#newPercent").focus().select();return false;}else{$("input#newPercent").val(o);}return true;}function j(o){if($("table#cat").data(o)!=undefined){k("Please pick a category name that does not already exist.");return true;}else{return false;}}$("button#assign").click(function(){l++;var r=' <input type="text" class="gradeCol" size="3" id="grade'+l+'" />';var q=m+'<span class="assignNum">Assignment '+l+"</span>: "+c;var p=m+r+c;var o=m+'<select id="select'+l+'">'+f()+"</select>"+c;$("table#assign").append("<tr>"+q+p+o+"</tr>");$("table#assign tr:last div").slideDown("fast",function(){$(this).replaceWith($(this).contents());});g();});$("input#newCatName").blur(function(){var o=$(this).val();if(!d.test(o)){k("Only letters and numbers may be used.");$(this).focus().select();}});$("input#newPercent").blur(function(){var o=$.trim($(this).val());o=parseFloat(o);if(!e.test(o)||o<0||o>100){k("Please enter a number between 0 and 100");$(this).focus().select();}else{$(this).val(o);}});$("button#addCat").click(function(){if(b()){var s=$("input#newCatName").val();var r=$("input#newPercent").val();s=s.replace(/\s+$/,"");s=s.replace(/\s+/," ");if(h(r)){if(!j(s)){var q=m+s+c;var p=m+r+"%"+c;var o=m+'<button class="remove'+s+'" id="'+s+'">Remove '+s+"</button>"+c;if($.trim(s)===""){k("Please insert a category name.");$("input#newCatName").focus();}else{if($.trim(r)===""){k("Please insert a percentage.");$("input#newPercent").focus();}else{i();$("table#cat").append("<tr>"+q+p+o+"</tr>");$("table#cat").data(s,r);$("table#cat tr:last div").slideDown("fast",function(){$(this).replaceWith($(this).contents());});$("select").append("<option>"+$("input#newCatName").val()+"</option>");$(".remove"+s).click(function(){var v=$(this).data("categoryName");$("table#cat").removeData(v);var w=$(this).parentsUntil("tbody");var u=$(this).parentsUntil("tr");var t=w.parent().html();w.find("td").each(function(x){t=$(this).html();$(this).replaceWith('<td><div class="removeMeNow" style="display:block">'+t+"</div></td>");});$(".removeMeNow").animate({height:0},500,function(){w.remove();});n(v);});$("input#newCatName").val("");$("input#newPercent").val("");$(".remove"+s).data("categoryName",s);}}}}else{k("You cannot have over 100% for the sum of your categories");}}});$("button#calculate").click(function(){if(a()){var o=0;var p=$("table#cat").data();var u;var s=1;var t;var r;var x;var q=0;var v;var w;for(u in p){r=0;t=0;q=0;w=0;if(1){for(s=1;s<=l;s++){x=0;v=$("#select"+s).val();if(v==u){x=parseFloat($("#grade"+s).val());t+=x;r++;}}if(r==0){k("You must have least one grade for each category");return;}else{q=t/r;}w=q*($("table#cat").data(u)/100);o+=w;}}o=o.toFixed(2);$("span#grade").text(o);}else{k("Your categories percentages must add up to 100%.");}});g();});
